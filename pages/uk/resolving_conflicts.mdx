---
title: "25. Вирішення конфліктів"
---

### Цілі

- Навчитися вирішувати конфлікти під час злиття.

## _01_ Злиття `main` до гілки `style`

Давайте повернемося до гілки `style` і зіллємо туди всі нещодавні зміни з гілки `main`.

<Run>
```
git switch style
git merge main
```
</Run>

<Output>
```git
==include[output/25-01.txt]
```
</Output>

Здається, у нас є конфлікт. І це не дивно! Давайте подивимося, що скаже про це Git:

<Run>
```
git status
```
</Run>

<Output>
```git
==include[output/25-02.txt]
```
</Output>

Якщо ви відкриєте `index.html`, то побачите:

<File file="index.html">
```html
==include[output/25-02-1.txt]
```
</File>

Частина між `<<<<<<<` `>>>>>>>` і є конфліктом. Секція зверху відповідає гілці `style`, що є поточною гілкою (або `HEAD`) репозиторія. Нижня секція відповідає змінам з гілки `main`. Git не може вирішити, які зміни застосовувати, тому просить вас розв'язати конфлікт вручну. Ви можете залишити зміни з гілки `style` або з гілки `main`, чи об'єднати їх у будь-який спосіб на власний розсуд. Ви також можете зробити будь-які інші зміни у файлі.

До речі, ви помітили, що наша друга зміна, тег `<p>`, не є частиною конфлікту? Це тому, що Git вдалося злити цю зміну автоматично.

## _02_ Скасування злиття

Перш ніж ми почнемо розв'язувати наш конфлікт, дозвольте мені зазначити, що переходити одразу до розв'язання конфлікту не завжди оптимально. Конфлікт може бути спричинений змінами, про які ви не знаєте. Або ж ці зміни є занадто великими, щоб з конфліктом можна було б впоратися одразу. Тому Git дозволяє скасувати злиття і відновити попередній стан репозиторія. Для цього ви можете скористатися командою `git merge --abort`, як це було запропоновано командою `status`, яку ми щойно виконали.

<Run>
```
git merge --abort
git status
```
</Run>

<Output>
```git
==include[output/25-03.txt]
```
</Output>

## _03_ Рішення конфлікту

Після невеличкої медитації ми готові вирішити конфлікт. Давайте запустимо злиття ще раз.

<Run>
```
git merge main
```
</Run>

Щоб вирішити конфлікт, нам потрібно відредагувати файл до стану, що нас влаштовує, а потім закомітити його як зазвичай. У нашому випадку ми об'єднаємо зміни з обох гілок. Отже, редагуємо файл до наступного стану:

<File file="index.html">
```html
<!-- Author: Alexander Shvets (alex@githowto.com) -->
<html>
  <head>
    <title>Hello World Page</title>
    <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  </head>
  <body>
    <h1>Hello, World!</h1>
    <p>Let's learn Git together.</p>
  </body>
</html>
```
</File>

## _04_ Зробіть коміт з розв'язаним конфліктом

<Run>
```
git add index.html
git commit -m "Resolved merge conflict"
git status
git log --all --graph
```
</Run>

<Output>
```git
==include[output/25-04.txt]
```
</Output>

Давайте подивимось на поточний стан нашого репозиторію і переконаємось, що все гаразд:

<Run>
```
git status
git log --all --graph
```
</Run>

<Output>
```git
==include[output/25-05.txt]
```
</Output>

## _05_ Розширені можливості злиття

Git не надає жодних графічних інструментів для допомоги зі злиттям, але буде із задоволенням працювати з будь-якими сторонніми інструментами, які ви захочете використовувати ([обговорення таких інструментів на StackOverflow](http://stackoverflow.com/questions/137102/whats-the-best-visual-merge-tool-for-git)).

При роботі з кодом в сучасному інтегрованому середовищі розробки (IDE), такому як Visual Studio або IntelliJ IDEA, ви, швидше за все, будете використовувати вбудований інструмент злиття. Наприклад, ось як виглядає розв'язання конфлікту в IntelliJ IDEA:

<img src="/images/screenshots/ide-merge.png" srcSet="/images/screenshots/ide-merge-2x.png 2x" alt="IntelliJ IDEA merge tool" width="1000" height="409"/>