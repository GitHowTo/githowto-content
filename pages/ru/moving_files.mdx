---
title: "20. Перемещение файлов"
---

### Цели

- Научиться перемещать файлы в пределах репозитория.

Я доволен нашими CSS-изменениями, но есть только один момент, который я хотел бы решить до того, как мы объединим наши изменения с `main`. Давайте переименуем файл `hello.html` в `index.html`. Также давайте перенесем наш файл стилей в специально отведенную директорию `css`.

## _01_ Просмотр истории изменений в конкретном файле

Git позволяет просматривать историю изменений конкретного файла. Давайте посмотрим историю изменений файла `hello.html` перед его переименованием.

<Run>
```
git log hello.html
git log style.css
```
</Run>

<Output>
```git
==include[output/20-01.txt]
```
</Output>

## _02_ Просмотр различий для конкретного файла

Возможность просмотра истории изменений для конкретного файла очень полезна. Она позволяет увидеть, что именно изменилось, а также кто и когда внес эти изменения. Кроме того, существует возможность увидеть изменения, связанные с конкретным коммитом. Я постоянно пользуюсь этим, чтобы разобраться, почему та или иная штука была реализована именно так в настоящей версии кода.

Команда `show` используется для просмотра изменений в конкретном коммите. Посмотрим изменения в файле `hello.html` в коммите, с тегом `v1` (можно использовать любую ссылку на коммит, например, метку `HEAD`, хеш коммита, имя ветки или тега и т.д.).

<Run>
```
git show v1
```
</Run>

<Output>
```git
==include[output/20-02.txt]
```
</Output>

## _03_ Переименуйте файл `hello.html`

Как видите, очень удобно иметь возможность видеть историю изменений конкретного файла. Но когда вы переименовываете или перемещаете какой-либо файл, есть риск потерять историю этого файла, если вы выполните эту процедуру неправильно.

Давайте переименуем наш файл `hello.html` в `index.html` с помощью стандартной команды `mv` и посмотрим, что из этого получится.

<Run>
```
mv hello.html index.html
git status
```
</Run>

<Output>
```git
==include[output/20-03.txt]
```
</Output>

Git воспринимает наше изменение так, будто файл был удален и создан заново. Это тревожный звоночек. Нам нужно сообщить Git, что мы именно переименовали файл, а не удалили его и сразу создали новый. В простейшем случае Git сам поймёт, что файл был переименован, как только мы добавим его в индекс:

<Run>
```
git add .
git status
```
</Run>

<Output>
```git
==include[output/20-04.txt]
```
</Output>

Видите, файл указан как переименованный. Но это всего лишь Git пытается проявить смекалку. Это не всегда работает. Например, если вы переименовали, **а также** изменили кучу файлов, Git может оказаться не в состоянии понять, что именно было переименовано. В этом случае вы можете потерять информацию об истории файлов до их переименования, поскольку файлы будут восприняты как новые.


## _04_ Переместите `style.css` безопасным способом

В большинстве операционных систем переименование и перемещение файлов — это одно и то же. Итак, давайте переместим наш файл `style.css` в директорию `css`, но на этот раз сделаем это безопасно с помощью команды `git mv`. Эта команда гарантирует, что перемещение будет записано в истории Git как перемещение.

<Run>
```
mkdir css
git mv style.css css/style.css
git status
```
</Run>

<Output>
```git
==include[output/20-05.txt]
```
</Output>

Давайте закоммитим наши изменения и проверим историю изменений в файле `css/styles.css`. Для просмотра истории файла до его перемещения нам потребуется добавить опцию `--follow`. Выполним оба варианта команды, чтобы понять разницу.

<Run>
```
git commit -m "Renamed hello.html; moved style.css"
git log css/style.css
git log --follow css/style.css
```
</Run>

<Output>
```git
==include[output/20-06.txt]
```
</Output>
