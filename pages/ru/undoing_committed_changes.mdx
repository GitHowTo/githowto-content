---
title: "14. Отмена коммитов"
---

### Цели

- Научиться отменять коммиты в локальном репозитории.

## _01_ Отмена коммитов

Иногда вы понимаете, что новые коммиты являются неверными, и хотите их отменить. Есть несколько способов решения этого вопроса, здесь мы будем использовать самый безопасный.

Мы отменим коммит путем создания нового коммита, отменяющего нежелательные изменения.

## _02_ Измените файл и сделайте коммит

Измените файл `hello.html` на следующий.

<File file="hello.html">
```html
<html>
  <head>
  </head>
  <body>
    <h1>Hello, World!</h1>
    →<!-- This is an unwanted but committed change -->←
  </body>
</html>
```
</File>

<Run>
```
git add hello.html
git commit -m "Oops, we didn't want this commit"
```
</Run>

## _03_ Сделайте коммит с новыми изменениями, отменяющими предыдущие

Чтобы отменить коммит, нам необходимо сделать коммит, который удаляет изменения, сохраненные нежелательным коммитом.

<Run>
```
git revert HEAD
```
</Run>

Перейдите в редактор, где вы можете отредактировать коммит-сообщение по умолчанию или оставить все как есть. Сохраните и закройте файл. Вы увидите:

<Output>
```git
==include[output/14-01.txt]
```
</Output>

Так как мы отменили самый последний произведенный коммит, мы смогли использовать метку `HEAD` в качестве аргумента для отмены коммита. Мы можем отменить любой произвольной коммит в истории, указав его хеш.

## _04_ Проверьте лог

Проверка лога показывает нежелательные и отмененные коммиты в наш репозиторий.

<Run>
```
git log
```
</Run>

<Output>
```git
==include[output/14-02.txt]
```
</Output>

Эта техника будет работать с любым коммитом (хотя, возможно, возникнут конфликты). Она безопасна в использовании даже в публичных ветках удаленных репозиториев.

## _05_ Далее

Далее давайте посмотрим на технику, которая может быть использована для удаления последних коммитов из истории репозитория.
