---
title: "25. Разрешение конфликтов"
---

### Цели

- Научиться разрешать конфликты во время слияния.

## _01_ Слияние `main` в ветку `style`

Давайте вернемся в ветку `style` и сольем в нее все последние изменения из ветки `main`.

<Run>
```
git switch style
git merge main
```
</Run>

<Output>
```git
==include[output/25-01.txt]
```
</Output>

Похоже, что у нас возник конфликт. Ничего удивительного! Посмотрим, что скажет по этому поводу Git:

<Run>
```
git status
```
</Run>

<Output>
```git
==include[output/25-02.txt]
```
</Output>

Если открыть файл `index.html`, то можно увидеть:

<File file="index.html">
```html
==include[output/25-02-1.txt]
```
</File>

Часть между `<<<<<<<` `>>>>>>>` является конфликтом. Верхняя часть соответствует ветке `style`, которая является текущей веткой (или `HEAD`) репозитория. Нижняя часть соответствует изменениям из ветки `main`. Git не может решить, какие изменения применить, поэтому он просит вас разрешить конфликт вручную. Вы можете оставить изменения из ветки `style` или из `main`, либо объединить их любым удобным способом. Вы также можете внести в файл любые другие изменения.

Кстати, вы заметили, что наше второе изменение, тег `<p>`, не является частью конфликта? Это потому, что Git сумел автоматически объединить ее.

## _02_ Отмена слияния

Прежде чем мы приступим к разрешению нашего конфликта, хочу заметить, что сразу бросаться к разрешению конфликта не всегда оптимально. Конфликт может быть вызван изменениями, о которых вы не знаете. Или же изменения слишком велики, чтобы разрешить конфликт сразу. По этой причине Git позволяет прервать слияние и вернуться к предыдущему состоянию. Для этого можно воспользоваться командой `git merge --abort`, как это было предложено командой `status`, которую мы выполнили ранее.

<Run>
```
git merge --abort
git status
```
</Run>

<Output>
```git
==include[output/25-03.txt]
```
</Output>


## _03_ Решение конфликта

После небольшой медитации мы готовы к разрешению конфликта. Давайте снова запустим объединение.

<Run>
```
git merge main
```
</Run>

Чтобы разрешить конфликт, нужно отредактировать файл до состояния, которое нас устраивает, и затем закоммитить его как обычно. В нашем случае мы объединим изменения из обеих веток. Поэтому мы отредактируем файл до следующего состояния:

<File file="index.html">
```html
<!-- Author: Alexander Shvets (alex@githowto.com) -->
<html>
  <head>
    <title>Hello World Page</title>
    <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  </head>
  <body>
    <h1>Hello, World!</h1>
    <p>Let's learn Git together.</p>
  </body>
</html>
```
</File>

## _04_ Закоммитьте разрешенный конфликт

<Run>
```
git add index.html
git commit -m "Resolved merge conflict"
git status
git log --all --graph
```
</Run>

<Output>
```git
==include[output/25-04.txt]
```
</Output>

Давайте посмотрим на текущее состояние нашего хранилища и убедимся, что все в порядке:

<Run>
```
git status
git log --all --graph
```
</Run>

<Output>
```git
==include[output/25-05.txt]
```
</Output>

## _05_ Расширенные возможности слияния

Git не предоставляет никаких графических инструментов слияния, но будет с удовольствием работать с любыми сторонними инструментами слияния, которые вы хотите использовать ([обсуждение таких инструментов на StackOverflow](http://stackoverflow.com/questions/137102/whats-the-best-visual-merge-tool-for-git)).

При работе с кодом в современной интегрированной среде разработки (IDE), такой как Visual Studio или IntelliJ IDEA, вы, скорее всего, будете использовать встроенный инструмент слияния. Например, вот как выглядит разрешение конфликтов в IntelliJ IDEA:

<img src="/images/screenshots/ide-merge.png" srcSet="/images/screenshots/ide-merge-2x.png 2x" alt="IntelliJ IDEA merge tool" width="1000" height="409"/>